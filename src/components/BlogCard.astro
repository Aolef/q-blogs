---
import "../styles/blogCard.scss"
// const platform = "github";
// const username = "withastro";
const { post } = Astro.props;

// 截断链接显示文本的函数
function truncateUrl(url, maxLength = 40) {
  if (url.length <= maxLength) return url;
  return url.substring(0, maxLength) + '...';
}
---
<div class="blogCardBox article-card bg-gray-800 bg-opacity-80 p-6 rounded-lg shadow-lg mt-[40px]" >
  <h3 class="text-xl font-semibold text-blue-300 mb-2">{post.frontmatter.title}</h3>
  <p class="text-gray-300 mb-4">{post.frontmatter.description}</p>
  <div class="text-sm text-gray-400 mb-2">发布日期: {post.frontmatter.pubDate.split('T')[0]}</div>
  <div class="text-sm text-gray-400 mb-2 whitespace-nowrap overflow-hidden flex flex-row">
    <span>来源: </span>{post.frontmatter.source ? 
      <span class="inline-flex items-center">
        <span>{post.frontmatter.source.split(",")[0]}</span>
        <a 
          href={post.frontmatter.source.split(",")[1]}
          target="_blank" 
          rel="noopener noreferrer"
          class="text-blue-400 hover:text-blue-300 underline relative z-10 inline-block"
          title={post.frontmatter.source.split(",")[1]}
          onclick="event.stopPropagation(); event.preventDefault(); window.open(this.href, '_blank');"
        >[{truncateUrl(post.frontmatter.source.split(",")[1])}]</a>
      </span>
      : <span>原创</span>
    }
  </div>
  <div class="text-sm text-gray-400">标签: {post.frontmatter.tags.join(', ')}</div>
</div>